<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Distributed Name Service</title>
<link href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
var map;
function initialize() {
  var myLatlng = new google.maps.LatLng(40.814,-73.6081);
  var myOptions = {
    zoom: 4,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }

  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
	
  var image = 'blue-dot.png';
  var ns = [
['planetlab04.cs.washington.edu', 47.6531, -122.313, 'boot', 0]
,['planet6.cs.ucsb.edu', 34.4285, -119.722, 'boot', 1]
,['planetlab2.umassd.edu', 41.6286, -71.0061, 'boot', 2]
,['planetlab1.cs.uoregon.edu', 44.04, -123.06, 'boot', 3]
,['planetlab7.flux.utah.edu', 40.7686, -111.846, 'boot', 4]
,['planetlab2.millennium.berkeley.edu', 37.8757, -122.259, 'boot', 5]
,['planetlab1.utep.edu', 31.75, -106.49, 'boot', 6]
,['planetlab6.csres.utexas.edu', 30.2869, -97.7366, 'boot', 7]  
,['planetlab3.arizona-gigapop.net', 32.2333, -110.948, 'boot', 8] 
,['planetlab1.acis.ufl.edu', 29.68, -82.27, 'boot', 9]
,['planet11.csc.ncsu.edu', 35.7667, -78.6333, 'boot', 10]
,['kupl1.ittc.ku.edu', 38.9527, -95.2644, 'boot', 11]
,['planetlab2.dtc.umn.edu', 44.98, -93.24, 'boot', 12]
,['roam2.cs.ou.edu', 35.2098, -97.4424, 'boot', 13]
,['planetlab1.netlab.uky.edu', 38.0401, -84.5054, 'boot', 14]
,['planetlab1.tsuniv.edu', 36.1659, -86.8313, 'boot', 15]
,['planetlab3.wail.wisc.edu', 43.0757, -89.3867, 'boot', 16]
,['planetlab5.eecs.umich.edu', 42.2944, -83.7126, 'boot', 17]
,['planetlab6.cs.uiuc.edu', 40.1103, -88.2272, 'boot', 18]
,['planetlab2.georgetown.edu', 38.54, -77.04, 'boot', 19]
  ];

  for (var i = 0; i < ns.length; i++) {
    var node = ns[i];
    var location = new google.maps.LatLng(node[1], node[2]);
    var marker = new google.maps.Marker({
        position: location,
        icon: image,
        map: map,
    });
    marker.setTitle("NSid:" + node[4] + "  Name: " + node[0]);
    var nameserver = "NSid: " + node[4];
    attachSecretMessage(marker, node[0], nameserver, node[3]);
    
  }

  var lns = [
['planetlab3.rutgers.edu', 40.4896, -74.4082, 'boot', 1, 'planetlab2.georgetown.edu', 1]
,['planetlab1.cs.colorado.edu', 40.0072, -105.262, 'boot', 2, 'kupl1.ittc.ku.edu', 2]
];

  for (var i = 0; i < lns.length; i++) {
	    var node = lns[i];
	    var location = new google.maps.LatLng(node[1], node[2]);
	    var marker = new google.maps.Marker({
	        position: location,
	        map: map,
	        animation: google.maps.Animation.DROP,
	    });

	    marker.setTitle("LNSid:" + node[4] + "  Name: " + node[0]);
	    var localnameserver = "LNSid: " + node[4];
	    var inf = node[3] + "<br/>Closest NS: " + node[6] + " (" + node[5] + ")";
	    attachSecretMessage(marker, node[0], localnameserver, inf);
	  }
}

// The five markers show a secret message when clicked
// but that message is not within the marker's instance data

function attachSecretMessage(marker, message, id, bootState) {
  var infowindow = new google.maps.InfoWindow(
      { content: "<b>" + id + "</b>" + "<br/>Name: " + message + "<br/>Boot Status: " + bootState
      });
  google.maps.event.addListener(marker, 'mouseover', function() {
    infowindow.open(map,marker);
  });
  google.maps.event.addListener(marker, 'mouseout', function() {
	    infowindow.close(map,marker);
  });
}

</script>
</head>
<body onload="initialize()">
  <div id="map_canvas"></div>
</body>

</html>
