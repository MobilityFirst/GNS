//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ../src/edu/umass/cs/gnsclient/client/util/IOSKeyPairUtils.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "edu/umass/cs/gnsclient/client/util/GuidEntry.h"
#include "edu/umass/cs/gnsclient/client/util/IOSKeyPairUtils.h"
#include "edu/umass/cs/gnsclient/client/util/keystorage/AbstractKeyStorage.h"
#include "edu/umass/cs/gnsclient/client/util/keystorage/IOSKeyStorage.h"
#include "edu/umass/cs/gnscommon/exceptions/client/EncryptionException.h"
#include "java/io/PrintStream.h"
#include "java/lang/Deprecated.h"
#include "java/lang/Exception.h"
#include "java/lang/System.h"
#include "java/lang/annotation/Annotation.h"
#include "java/math/BigInteger.h"
#include "java/security/KeyFactory.h"
#include "java/security/KeyPair.h"
#include "java/security/PrivateKey.h"
#include "java/security/PublicKey.h"
#include "java/security/spec/RSAPrivateKeySpec.h"
#include "java/security/spec/RSAPublicKeySpec.h"
#include "KeyPair.h"

@interface EduUmassCsGnsclientClientUtilIOSKeyPairUtils ()

+ (NSString *)generateKeyWithNSString:(NSString *)gnsName
                         withNSString:(NSString *)username
                         withNSString:(NSString *)suffix;

+ (void)createSingleton;

@end

inline NSString *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_get_GUID();
static NSString *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_GUID = @"GU";
J2OBJC_STATIC_FIELD_OBJ_FINAL(EduUmassCsGnsclientClientUtilIOSKeyPairUtils, GUID, NSString *)

inline NSString *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_get_PUBLIC();
static NSString *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_PUBLIC = @"PU";
J2OBJC_STATIC_FIELD_OBJ_FINAL(EduUmassCsGnsclientClientUtilIOSKeyPairUtils, PUBLIC, NSString *)

inline NSString *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_get_PRIVATE();
static NSString *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_PRIVATE = @"PR";
J2OBJC_STATIC_FIELD_OBJ_FINAL(EduUmassCsGnsclientClientUtilIOSKeyPairUtils, PRIVATE, NSString *)

inline NSString *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_get_DEFAULT_GUID();
static NSString *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_DEFAULT_GUID = @"D_GUID";
J2OBJC_STATIC_FIELD_OBJ_FINAL(EduUmassCsGnsclientClientUtilIOSKeyPairUtils, DEFAULT_GUID, NSString *)

inline NSString *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_get_DEFAULT_GNS();
static NSString *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_DEFAULT_GNS = @"D_GNS";
J2OBJC_STATIC_FIELD_OBJ_FINAL(EduUmassCsGnsclientClientUtilIOSKeyPairUtils, DEFAULT_GNS, NSString *)

inline id EduUmassCsGnsclientClientUtilIOSKeyPairUtils_get_SINGLETON_OBJ_LOCK();
static id EduUmassCsGnsclientClientUtilIOSKeyPairUtils_SINGLETON_OBJ_LOCK;
J2OBJC_STATIC_FIELD_OBJ_FINAL(EduUmassCsGnsclientClientUtilIOSKeyPairUtils, SINGLETON_OBJ_LOCK, id)

inline EduUmassCsGnsclientClientUtilKeystorageAbstractKeyStorage *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_get_keyStorageObj();
inline EduUmassCsGnsclientClientUtilKeystorageAbstractKeyStorage *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_set_keyStorageObj(EduUmassCsGnsclientClientUtilKeystorageAbstractKeyStorage *value);
static EduUmassCsGnsclientClientUtilKeystorageAbstractKeyStorage *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_keyStorageObj;
J2OBJC_STATIC_FIELD_OBJ(EduUmassCsGnsclientClientUtilIOSKeyPairUtils, keyStorageObj, EduUmassCsGnsclientClientUtilKeystorageAbstractKeyStorage *)

__attribute__((unused)) static NSString *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_generateKeyWithNSString_withNSString_withNSString_(NSString *gnsName, NSString *username, NSString *suffix);

__attribute__((unused)) static void EduUmassCsGnsclientClientUtilIOSKeyPairUtils_createSingleton();

__attribute__((unused)) static IOSObjectArray *EduUmassCsGnsclientClientUtilIOSKeyPairUtils__Annotations$0();

__attribute__((unused)) static IOSObjectArray *EduUmassCsGnsclientClientUtilIOSKeyPairUtils__Annotations$1();

__attribute__((unused)) static IOSObjectArray *EduUmassCsGnsclientClientUtilIOSKeyPairUtils__Annotations$2();

J2OBJC_INITIALIZED_DEFN(EduUmassCsGnsclientClientUtilIOSKeyPairUtils)

@implementation EduUmassCsGnsclientClientUtilIOSKeyPairUtils

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  EduUmassCsGnsclientClientUtilIOSKeyPairUtils_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (EduUmassCsGnsclientClientUtilGuidEntry *)getGuidEntryWithNSString:(NSString *)gnsName
                                                        withNSString:(NSString *)username {
  return EduUmassCsGnsclientClientUtilIOSKeyPairUtils_getGuidEntryWithNSString_withNSString_(gnsName, username);
}

+ (void)setDefaultGnsWithNSString:(NSString *)gnsHostPort {
  EduUmassCsGnsclientClientUtilIOSKeyPairUtils_setDefaultGnsWithNSString_(gnsHostPort);
}

+ (NSString *)getDefaultGns {
  return EduUmassCsGnsclientClientUtilIOSKeyPairUtils_getDefaultGns();
}

+ (void)removeDefaultGns {
  EduUmassCsGnsclientClientUtilIOSKeyPairUtils_removeDefaultGns();
}

+ (NSString *)generateKeyWithNSString:(NSString *)gnsName
                         withNSString:(NSString *)username
                         withNSString:(NSString *)suffix {
  return EduUmassCsGnsclientClientUtilIOSKeyPairUtils_generateKeyWithNSString_withNSString_withNSString_(gnsName, username, suffix);
}

+ (void)createSingleton {
  EduUmassCsGnsclientClientUtilIOSKeyPairUtils_createSingleton();
}

+ (JavaSecurityKeyPair *)generateKeyPair {
  return EduUmassCsGnsclientClientUtilIOSKeyPairUtils_generateKeyPair();
}

+ (NSString *)generateAndSaveKeyPair {
  return EduUmassCsGnsclientClientUtilIOSKeyPairUtils_generateAndSaveKeyPair();
}

+ (NSString *)getBase64OfPublicKeyFromGuidWithNSString:(NSString *)guid {
  return EduUmassCsGnsclientClientUtilIOSKeyPairUtils_getBase64OfPublicKeyFromGuidWithNSString_(guid);
}

+ (NSString *)signDigestOfMessageWithNSString:(NSString *)guid
                                 withNSString:(NSString *)message {
  return EduUmassCsGnsclientClientUtilIOSKeyPairUtils_signDigestOfMessageWithNSString_withNSString_(guid, message);
}

+ (void)mainWithNSStringArray:(IOSObjectArray *)args {
  EduUmassCsGnsclientClientUtilIOSKeyPairUtils_mainWithNSStringArray_(args);
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LEduUmassCsGnsclientClientUtilGuidEntry;", 0x9, 0, 1, -1, -1, -1, -1 },
    { NULL, "V", 0x9, 2, 3, -1, -1, 4, -1 },
    { NULL, "LNSString;", 0x9, -1, -1, -1, -1, 5, -1 },
    { NULL, "V", 0x9, -1, -1, -1, -1, 6, -1 },
    { NULL, "LNSString;", 0xa, 7, 8, -1, -1, -1, -1 },
    { NULL, "V", 0xa, -1, -1, -1, -1, -1, -1 },
    { NULL, "LJavaSecurityKeyPair;", 0x9, -1, -1, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x9, -1, -1, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x9, 9, 3, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x9, 10, 1, 11, -1, -1, -1 },
    { NULL, "V", 0x9, 12, 13, 14, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(getGuidEntryWithNSString:withNSString:);
  methods[2].selector = @selector(setDefaultGnsWithNSString:);
  methods[3].selector = @selector(getDefaultGns);
  methods[4].selector = @selector(removeDefaultGns);
  methods[5].selector = @selector(generateKeyWithNSString:withNSString:withNSString:);
  methods[6].selector = @selector(createSingleton);
  methods[7].selector = @selector(generateKeyPair);
  methods[8].selector = @selector(generateAndSaveKeyPair);
  methods[9].selector = @selector(getBase64OfPublicKeyFromGuidWithNSString:);
  methods[10].selector = @selector(signDigestOfMessageWithNSString:withNSString:);
  methods[11].selector = @selector(mainWithNSStringArray:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "GUID", "LNSString;", .constantValue.asLong = 0, 0x1a, -1, 15, -1, -1 },
    { "PUBLIC", "LNSString;", .constantValue.asLong = 0, 0x1a, -1, 16, -1, -1 },
    { "PRIVATE", "LNSString;", .constantValue.asLong = 0, 0x1a, -1, 17, -1, -1 },
    { "DEFAULT_GUID", "LNSString;", .constantValue.asLong = 0, 0x1a, -1, 18, -1, -1 },
    { "DEFAULT_GNS", "LNSString;", .constantValue.asLong = 0, 0x1a, -1, 19, -1, -1 },
    { "SINGLETON_OBJ_LOCK", "LNSObject;", .constantValue.asLong = 0, 0x1a, -1, 20, -1, -1 },
    { "keyStorageObj", "LEduUmassCsGnsclientClientUtilKeystorageAbstractKeyStorage;", .constantValue.asLong = 0, 0xa, -1, 21, -1, -1 },
  };
  static const void *ptrTable[] = { "getGuidEntry", "LNSString;LNSString;", "setDefaultGns", "LNSString;", (void *)&EduUmassCsGnsclientClientUtilIOSKeyPairUtils__Annotations$0, (void *)&EduUmassCsGnsclientClientUtilIOSKeyPairUtils__Annotations$1, (void *)&EduUmassCsGnsclientClientUtilIOSKeyPairUtils__Annotations$2, "generateKey", "LNSString;LNSString;LNSString;", "getBase64OfPublicKeyFromGuid", "signDigestOfMessage", "LJavaSecurityNoSuchAlgorithmException;LJavaSecurityInvalidKeyException;LJavaSecuritySignatureException;LJavaIoUnsupportedEncodingException;", "main", "[LNSString;", "LJavaLangException;", &EduUmassCsGnsclientClientUtilIOSKeyPairUtils_GUID, &EduUmassCsGnsclientClientUtilIOSKeyPairUtils_PUBLIC, &EduUmassCsGnsclientClientUtilIOSKeyPairUtils_PRIVATE, &EduUmassCsGnsclientClientUtilIOSKeyPairUtils_DEFAULT_GUID, &EduUmassCsGnsclientClientUtilIOSKeyPairUtils_DEFAULT_GNS, &EduUmassCsGnsclientClientUtilIOSKeyPairUtils_SINGLETON_OBJ_LOCK, &EduUmassCsGnsclientClientUtilIOSKeyPairUtils_keyStorageObj };
  static const J2ObjcClassInfo _EduUmassCsGnsclientClientUtilIOSKeyPairUtils = { "IOSKeyPairUtils", "edu.umass.cs.gnsclient.client.util", ptrTable, methods, fields, 7, 0x1, 12, 7, -1, -1, -1, -1, -1 };
  return &_EduUmassCsGnsclientClientUtilIOSKeyPairUtils;
}

+ (void)initialize {
  if (self == [EduUmassCsGnsclientClientUtilIOSKeyPairUtils class]) {
    JreStrongAssignAndConsume(&EduUmassCsGnsclientClientUtilIOSKeyPairUtils_SINGLETON_OBJ_LOCK, new_NSObject_init());
    JreStrongAssign(&EduUmassCsGnsclientClientUtilIOSKeyPairUtils_keyStorageObj, nil);
    J2OBJC_SET_INITIALIZED(EduUmassCsGnsclientClientUtilIOSKeyPairUtils)
  }
}

@end

void EduUmassCsGnsclientClientUtilIOSKeyPairUtils_init(EduUmassCsGnsclientClientUtilIOSKeyPairUtils *self) {
  NSObject_init(self);
}

EduUmassCsGnsclientClientUtilIOSKeyPairUtils *new_EduUmassCsGnsclientClientUtilIOSKeyPairUtils_init() {
  J2OBJC_NEW_IMPL(EduUmassCsGnsclientClientUtilIOSKeyPairUtils, init)
}

EduUmassCsGnsclientClientUtilIOSKeyPairUtils *create_EduUmassCsGnsclientClientUtilIOSKeyPairUtils_init() {
  J2OBJC_CREATE_IMPL(EduUmassCsGnsclientClientUtilIOSKeyPairUtils, init)
}

EduUmassCsGnsclientClientUtilGuidEntry *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_getGuidEntryWithNSString_withNSString_(NSString *gnsName, NSString *username) {
  EduUmassCsGnsclientClientUtilIOSKeyPairUtils_initialize();
  if (username == nil) {
    return nil;
  }

  EduUmassCsGnsclientClientUtilIOSKeyPairUtils_createSingleton();
  NSString *guid = [((EduUmassCsGnsclientClientUtilKeystorageAbstractKeyStorage *) nil_chk(EduUmassCsGnsclientClientUtilIOSKeyPairUtils_keyStorageObj)) getWithNSString:EduUmassCsGnsclientClientUtilIOSKeyPairUtils_generateKeyWithNSString_withNSString_withNSString_(gnsName, username, EduUmassCsGnsclientClientUtilIOSKeyPairUtils_GUID) withNSString:@""];
  if (![((NSString *) nil_chk(guid)) java_isEmpty]) {
    @try {
      JavaSecurityKeyPair *kp = EduUmassCsGnsclientClientUtilIOSKeyPairUtils_generateKeyPair();
      return create_EduUmassCsGnsclientClientUtilGuidEntry_initWithNSString_withNSString_withJavaSecurityPublicKey_withJavaSecurityPrivateKey_(username, guid, [((JavaSecurityKeyPair *) nil_chk(kp)) getPublic], [kp getPrivate]);
    }
    @catch (EduUmassCsGnscommonExceptionsClientEncryptionException *e) {
      [((JavaIoPrintStream *) nil_chk(JreLoadStatic(JavaLangSystem, out))) printlnWithNSString:[((EduUmassCsGnscommonExceptionsClientEncryptionException *) nil_chk(e)) description]];
      return nil;
    }
  }
  else {
    return nil;
  }
}

void EduUmassCsGnsclientClientUtilIOSKeyPairUtils_setDefaultGnsWithNSString_(NSString *gnsHostPort) {
  EduUmassCsGnsclientClientUtilIOSKeyPairUtils_initialize();
  EduUmassCsGnsclientClientUtilIOSKeyPairUtils_createSingleton();
  [((EduUmassCsGnsclientClientUtilKeystorageAbstractKeyStorage *) nil_chk(EduUmassCsGnsclientClientUtilIOSKeyPairUtils_keyStorageObj)) putWithNSString:EduUmassCsGnsclientClientUtilIOSKeyPairUtils_DEFAULT_GNS withNSString:gnsHostPort];
}

NSString *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_getDefaultGns() {
  EduUmassCsGnsclientClientUtilIOSKeyPairUtils_initialize();
  EduUmassCsGnsclientClientUtilIOSKeyPairUtils_createSingleton();
  return [((EduUmassCsGnsclientClientUtilKeystorageAbstractKeyStorage *) nil_chk(EduUmassCsGnsclientClientUtilIOSKeyPairUtils_keyStorageObj)) getWithNSString:EduUmassCsGnsclientClientUtilIOSKeyPairUtils_DEFAULT_GNS withNSString:nil];
}

void EduUmassCsGnsclientClientUtilIOSKeyPairUtils_removeDefaultGns() {
  EduUmassCsGnsclientClientUtilIOSKeyPairUtils_initialize();
  EduUmassCsGnsclientClientUtilIOSKeyPairUtils_createSingleton();
  [((EduUmassCsGnsclientClientUtilKeystorageAbstractKeyStorage *) nil_chk(EduUmassCsGnsclientClientUtilIOSKeyPairUtils_keyStorageObj)) removeWithNSString:EduUmassCsGnsclientClientUtilIOSKeyPairUtils_DEFAULT_GNS];
}

NSString *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_generateKeyWithNSString_withNSString_withNSString_(NSString *gnsName, NSString *username, NSString *suffix) {
  EduUmassCsGnsclientClientUtilIOSKeyPairUtils_initialize();
  NSString *string = JreStrcat("$C$C$", gnsName, '#', username, '-', suffix);
  if (((jint) [string length]) > 2048) {
    return [string java_substring:((jint) [string length]) - 2048];
  }
  else {
    return string;
  }
}

void EduUmassCsGnsclientClientUtilIOSKeyPairUtils_createSingleton() {
  EduUmassCsGnsclientClientUtilIOSKeyPairUtils_initialize();
  if (EduUmassCsGnsclientClientUtilIOSKeyPairUtils_keyStorageObj == nil) {
    @synchronized(EduUmassCsGnsclientClientUtilIOSKeyPairUtils_SINGLETON_OBJ_LOCK) {
      if (EduUmassCsGnsclientClientUtilIOSKeyPairUtils_keyStorageObj == nil) {
        JreStrongAssignAndConsume(&EduUmassCsGnsclientClientUtilIOSKeyPairUtils_keyStorageObj, new_EduUmassCsGnsclientClientUtilKeystorageIOSKeyStorage_init());
      }
    }
  }
  JreAssert(((EduUmassCsGnsclientClientUtilIOSKeyPairUtils_keyStorageObj != nil)), (@"edu/umass/cs/gnsclient/client/util/IOSKeyPairUtils.java:127 condition failed: assert (keyStorageObj != null);"));
}

JavaSecurityKeyPair *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_generateKeyPair() {
  EduUmassCsGnsclientClientUtilIOSKeyPairUtils_initialize();
  @try {
    JavaSecurityKeyFactory *fact = JavaSecurityKeyFactory_getInstanceWithNSString_(@"RSA");
    id<JavaSecurityPublicKey> pub = [((JavaSecurityKeyFactory *) nil_chk(fact)) generatePublicWithJavaSecuritySpecKeySpec:create_JavaSecuritySpecRSAPublicKeySpec_initWithJavaMathBigInteger_withJavaMathBigInteger_(create_JavaMathBigInteger_initWithNSString_(@"126183173082874844637952901960865809228783583450688814141148417648807958333099119644874791736663780530158327353949473953143599351828672745381741163148759593688040153756690753357693891591900736951681645734271187360570232481677612954701021664472857269048194483763294248853395681697580178537778135146755606080851"), create_JavaMathBigInteger_initWithNSString_(@"65537"))];
    id<JavaSecurityPrivateKey> priv = [fact generatePrivateWithJavaSecuritySpecKeySpec:create_JavaSecuritySpecRSAPrivateKeySpec_initWithJavaMathBigInteger_withJavaMathBigInteger_(create_JavaMathBigInteger_initWithNSString_(@"126183173082874844637952901960865809228783583450688814141148417648807958333099119644874791736663780530158327353949473953143599351828672745381741163148759593688040153756690753357693891591900736951681645734271187360570232481677612954701021664472857269048194483763294248853395681697580178537778135146755606080851"), create_JavaMathBigInteger_initWithNSString_(@"15876626108021208918390521836051382622038686988027831017713808259945838601320404360767772901727719215888514386692515101661994297193634671382849956991083989554122755344196765004493909865687803605408109587648252347256902106306082790197547407143436778025637991525989203543883089994924508017995437871770596312209"))];
    JavaSecurityKeyPair *keyPair = create_JavaSecurityKeyPair_initWithJavaSecurityPublicKey_withJavaSecurityPrivateKey_(pub, priv);
    return keyPair;
  }
  @catch (JavaLangException *e) {
    [((JavaLangException *) nil_chk(e)) printStackTrace];
    return nil;
  }
}

NSString *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_generateAndSaveKeyPair() {
  EduUmassCsGnsclientClientUtilIOSKeyPairUtils_initialize();
  KeyPair *keyPair = [[KeyPair alloc] init];
  return [keyPair sha1PublicKeyToString];
}

NSString *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_getBase64OfPublicKeyFromGuidWithNSString_(NSString *guid) {
  EduUmassCsGnsclientClientUtilIOSKeyPairUtils_initialize();
  KeyPair *keyPair = [[KeyPair alloc] initWithGuid:guid];
  NSData *plainData = [keyPair getRSAPublicKeyEncoded];
  NSString *base64String = [plainData base64EncodedStringWithOptions:0];
  return base64String;
}

NSString *EduUmassCsGnsclientClientUtilIOSKeyPairUtils_signDigestOfMessageWithNSString_withNSString_(NSString *guid, NSString *message) {
  EduUmassCsGnsclientClientUtilIOSKeyPairUtils_initialize();
  return @"DIGEST";
}

void EduUmassCsGnsclientClientUtilIOSKeyPairUtils_mainWithNSStringArray_(IOSObjectArray *args) {
  EduUmassCsGnsclientClientUtilIOSKeyPairUtils_initialize();
}

IOSObjectArray *EduUmassCsGnsclientClientUtilIOSKeyPairUtils__Annotations$0() {
  return [IOSObjectArray arrayWithObjects:(id[]){ create_JavaLangDeprecated() } count:1 type:JavaLangAnnotationAnnotation_class_()];
}

IOSObjectArray *EduUmassCsGnsclientClientUtilIOSKeyPairUtils__Annotations$1() {
  return [IOSObjectArray arrayWithObjects:(id[]){ create_JavaLangDeprecated() } count:1 type:JavaLangAnnotationAnnotation_class_()];
}

IOSObjectArray *EduUmassCsGnsclientClientUtilIOSKeyPairUtils__Annotations$2() {
  return [IOSObjectArray arrayWithObjects:(id[]){ create_JavaLangDeprecated() } count:1 type:JavaLangAnnotationAnnotation_class_()];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(EduUmassCsGnsclientClientUtilIOSKeyPairUtils)
