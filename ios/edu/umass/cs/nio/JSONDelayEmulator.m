//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ../../gig_ios/src/edu/umass/cs/nio/JSONDelayEmulator.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "edu/umass/cs/nio/JSONDelayEmulator.h"
#include "edu/umass/cs/nio/nioutils/InterfaceDelayEmulator.h"
#include "java/lang/Integer.h"
#include "java/lang/Math.h"
#include "java/net/SocketAddress.h"
#include "java/util/Timer.h"
#include "org/json/JSONException.h"
#include "org/json/JSONObject.h"

@interface EduUmassCsNioJSONDelayEmulator ()

+ (jlong)getDelayWithId:(id)id_;

@end

inline jboolean EduUmassCsNioJSONDelayEmulator_get_EMULATE_RECEIVER_DELAYS();
inline jboolean EduUmassCsNioJSONDelayEmulator_set_EMULATE_RECEIVER_DELAYS(jboolean value);
inline jboolean *EduUmassCsNioJSONDelayEmulator_getRef_EMULATE_RECEIVER_DELAYS();
static jboolean EduUmassCsNioJSONDelayEmulator_EMULATE_RECEIVER_DELAYS = false;
J2OBJC_STATIC_FIELD_PRIMITIVE(EduUmassCsNioJSONDelayEmulator, EMULATE_RECEIVER_DELAYS, jboolean)

inline jdouble EduUmassCsNioJSONDelayEmulator_get_VARIATION();
inline jdouble EduUmassCsNioJSONDelayEmulator_set_VARIATION(jdouble value);
inline jdouble *EduUmassCsNioJSONDelayEmulator_getRef_VARIATION();
static jdouble EduUmassCsNioJSONDelayEmulator_VARIATION = 0.1;
J2OBJC_STATIC_FIELD_PRIMITIVE(EduUmassCsNioJSONDelayEmulator, VARIATION, jdouble)

inline jboolean EduUmassCsNioJSONDelayEmulator_get_USE_CONFIG_FILE_INFO();
inline jboolean EduUmassCsNioJSONDelayEmulator_set_USE_CONFIG_FILE_INFO(jboolean value);
inline jboolean *EduUmassCsNioJSONDelayEmulator_getRef_USE_CONFIG_FILE_INFO();
static jboolean EduUmassCsNioJSONDelayEmulator_USE_CONFIG_FILE_INFO = false;
J2OBJC_STATIC_FIELD_PRIMITIVE(EduUmassCsNioJSONDelayEmulator, USE_CONFIG_FILE_INFO, jboolean)

inline jlong EduUmassCsNioJSONDelayEmulator_get_DEFAULT_DELAY();
inline jlong EduUmassCsNioJSONDelayEmulator_set_DEFAULT_DELAY(jlong value);
inline jlong *EduUmassCsNioJSONDelayEmulator_getRef_DEFAULT_DELAY();
static jlong EduUmassCsNioJSONDelayEmulator_DEFAULT_DELAY = 100;
J2OBJC_STATIC_FIELD_PRIMITIVE(EduUmassCsNioJSONDelayEmulator, DEFAULT_DELAY, jlong)

inline id EduUmassCsNioJSONDelayEmulator_get_pingNodeConfig();
inline id EduUmassCsNioJSONDelayEmulator_set_pingNodeConfig(id value);
static id EduUmassCsNioJSONDelayEmulator_pingNodeConfig;
J2OBJC_STATIC_FIELD_OBJ(EduUmassCsNioJSONDelayEmulator, pingNodeConfig, id)

inline JavaUtilTimer *EduUmassCsNioJSONDelayEmulator_get_timer();
static JavaUtilTimer *EduUmassCsNioJSONDelayEmulator_timer;
J2OBJC_STATIC_FIELD_OBJ_FINAL(EduUmassCsNioJSONDelayEmulator, timer, JavaUtilTimer *)

__attribute__((unused)) static jlong EduUmassCsNioJSONDelayEmulator_getDelayWithId_(id id_);

J2OBJC_INITIALIZED_DEFN(EduUmassCsNioJSONDelayEmulator)

NSString *EduUmassCsNioJSONDelayEmulator_DELAY_STR = @"_delay";

@implementation EduUmassCsNioJSONDelayEmulator

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  EduUmassCsNioJSONDelayEmulator_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (void)emulateDelays {
  EduUmassCsNioJSONDelayEmulator_emulateDelays();
}

+ (void)emulateConfigFileDelaysWithEduUmassCsNioNioutilsInterfaceDelayEmulator:(id<EduUmassCsNioNioutilsInterfaceDelayEmulator>)pingNodeConfig
                                                                    withDouble:(jdouble)variation {
  EduUmassCsNioJSONDelayEmulator_emulateConfigFileDelaysWithEduUmassCsNioNioutilsInterfaceDelayEmulator_withDouble_(pingNodeConfig, variation);
}

+ (jboolean)isDelayEmulated {
  return EduUmassCsNioJSONDelayEmulator_isDelayEmulated();
}

+ (void)stop {
  EduUmassCsNioJSONDelayEmulator_stop();
}

+ (void)putEmulatedDelayWithId:(id)id_
         withOrgJsonJSONObject:(OrgJsonJSONObject *)jsonData {
  EduUmassCsNioJSONDelayEmulator_putEmulatedDelayWithId_withOrgJsonJSONObject_(id_, jsonData);
}

+ (jlong)getEmulatedDelayWithOrgJsonJSONObject:(OrgJsonJSONObject *)jsonData {
  return EduUmassCsNioJSONDelayEmulator_getEmulatedDelayWithOrgJsonJSONObject_(jsonData);
}

+ (jlong)getEmulatedDelayWithNSString:(NSString *)strData {
  return EduUmassCsNioJSONDelayEmulator_getEmulatedDelayWithNSString_(strData);
}

+ (jlong)getDelayWithId:(id)id_ {
  return EduUmassCsNioJSONDelayEmulator_getDelayWithId_(id_);
}

+ (jlong)getEmulatedDelay {
  return EduUmassCsNioJSONDelayEmulator_getEmulatedDelay();
}

+ (void)setBaseDelayWithLong:(jlong)d {
  EduUmassCsNioJSONDelayEmulator_setBaseDelayWithLong_(d);
}

+ (void)setVariationWithDouble:(jdouble)v {
  EduUmassCsNioJSONDelayEmulator_setVariationWithDouble_(v);
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x9, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x9, 0, 1, -1, 2, -1, -1 },
    { NULL, "Z", 0x9, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x9, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x9, 3, 4, -1, -1, -1, -1 },
    { NULL, "J", 0x9, 5, 6, -1, -1, -1, -1 },
    { NULL, "J", 0x9, 5, 7, -1, -1, -1, -1 },
    { NULL, "J", 0xa, 8, 9, -1, -1, -1, -1 },
    { NULL, "J", 0xc, -1, -1, -1, -1, -1, -1 },
    { NULL, "V", 0x9, 10, 11, -1, -1, -1, -1 },
    { NULL, "V", 0x9, 12, 13, -1, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(emulateDelays);
  methods[2].selector = @selector(emulateConfigFileDelaysWithEduUmassCsNioNioutilsInterfaceDelayEmulator:withDouble:);
  methods[3].selector = @selector(isDelayEmulated);
  methods[4].selector = @selector(stop);
  methods[5].selector = @selector(putEmulatedDelayWithId:withOrgJsonJSONObject:);
  methods[6].selector = @selector(getEmulatedDelayWithOrgJsonJSONObject:);
  methods[7].selector = @selector(getEmulatedDelayWithNSString:);
  methods[8].selector = @selector(getDelayWithId:);
  methods[9].selector = @selector(getEmulatedDelay);
  methods[10].selector = @selector(setBaseDelayWithLong:);
  methods[11].selector = @selector(setVariationWithDouble:);
  #pragma clang diagnostic pop
  static const J2ObjcFieldInfo fields[] = {
    { "DELAY_STR", "LNSString;", .constantValue.asLong = 0, 0x19, -1, 14, -1, -1 },
    { "EMULATE_RECEIVER_DELAYS", "Z", .constantValue.asLong = 0, 0xa, -1, 15, -1, -1 },
    { "VARIATION", "D", .constantValue.asLong = 0, 0xa, -1, 16, -1, -1 },
    { "USE_CONFIG_FILE_INFO", "Z", .constantValue.asLong = 0, 0xa, -1, 17, -1, -1 },
    { "DEFAULT_DELAY", "J", .constantValue.asLong = 0, 0xa, -1, 18, -1, -1 },
    { "pingNodeConfig", "LNSObject;", .constantValue.asLong = 0, 0xa, -1, 19, -1, -1 },
    { "timer", "LJavaUtilTimer;", .constantValue.asLong = 0, 0x1a, -1, 20, -1, -1 },
  };
  static const void *ptrTable[] = { "emulateConfigFileDelays", "LEduUmassCsNioNioutilsInterfaceDelayEmulator;D", "(Ledu/umass/cs/nio/nioutils/InterfaceDelayEmulator<*>;D)V", "putEmulatedDelay", "LNSObject;LOrgJsonJSONObject;", "getEmulatedDelay", "LOrgJsonJSONObject;", "LNSString;", "getDelay", "LNSObject;", "setBaseDelay", "J", "setVariation", "D", &EduUmassCsNioJSONDelayEmulator_DELAY_STR, &EduUmassCsNioJSONDelayEmulator_EMULATE_RECEIVER_DELAYS, &EduUmassCsNioJSONDelayEmulator_VARIATION, &EduUmassCsNioJSONDelayEmulator_USE_CONFIG_FILE_INFO, &EduUmassCsNioJSONDelayEmulator_DEFAULT_DELAY, &EduUmassCsNioJSONDelayEmulator_pingNodeConfig, &EduUmassCsNioJSONDelayEmulator_timer };
  static const J2ObjcClassInfo _EduUmassCsNioJSONDelayEmulator = { "JSONDelayEmulator", "edu.umass.cs.nio", ptrTable, methods, fields, 7, 0x1, 12, 7, -1, -1, -1, -1, -1 };
  return &_EduUmassCsNioJSONDelayEmulator;
}

+ (void)initialize {
  if (self == [EduUmassCsNioJSONDelayEmulator class]) {
    JreStrongAssign(&EduUmassCsNioJSONDelayEmulator_pingNodeConfig, nil);
    JreStrongAssignAndConsume(&EduUmassCsNioJSONDelayEmulator_timer, new_JavaUtilTimer_initWithNSString_([EduUmassCsNioJSONDelayEmulator_class_() getSimpleName]));
    J2OBJC_SET_INITIALIZED(EduUmassCsNioJSONDelayEmulator)
  }
}

@end

void EduUmassCsNioJSONDelayEmulator_init(EduUmassCsNioJSONDelayEmulator *self) {
  NSObject_init(self);
}

EduUmassCsNioJSONDelayEmulator *new_EduUmassCsNioJSONDelayEmulator_init() {
  J2OBJC_NEW_IMPL(EduUmassCsNioJSONDelayEmulator, init)
}

EduUmassCsNioJSONDelayEmulator *create_EduUmassCsNioJSONDelayEmulator_init() {
  J2OBJC_CREATE_IMPL(EduUmassCsNioJSONDelayEmulator, init)
}

void EduUmassCsNioJSONDelayEmulator_emulateDelays() {
  EduUmassCsNioJSONDelayEmulator_initialize();
  EduUmassCsNioJSONDelayEmulator_EMULATE_RECEIVER_DELAYS = true;
}

void EduUmassCsNioJSONDelayEmulator_emulateConfigFileDelaysWithEduUmassCsNioNioutilsInterfaceDelayEmulator_withDouble_(id<EduUmassCsNioNioutilsInterfaceDelayEmulator> pingNodeConfig, jdouble variation) {
  EduUmassCsNioJSONDelayEmulator_initialize();
  EduUmassCsNioJSONDelayEmulator_EMULATE_RECEIVER_DELAYS = true;
  EduUmassCsNioJSONDelayEmulator_VARIATION = variation;
  EduUmassCsNioJSONDelayEmulator_USE_CONFIG_FILE_INFO = true;
  JreStrongAssign(&EduUmassCsNioJSONDelayEmulator_pingNodeConfig, pingNodeConfig);
}

jboolean EduUmassCsNioJSONDelayEmulator_isDelayEmulated() {
  EduUmassCsNioJSONDelayEmulator_initialize();
  return EduUmassCsNioJSONDelayEmulator_EMULATE_RECEIVER_DELAYS;
}

void EduUmassCsNioJSONDelayEmulator_stop() {
  EduUmassCsNioJSONDelayEmulator_initialize();
  [((JavaUtilTimer *) nil_chk(EduUmassCsNioJSONDelayEmulator_timer)) cancel];
}

void EduUmassCsNioJSONDelayEmulator_putEmulatedDelayWithId_withOrgJsonJSONObject_(id id_, OrgJsonJSONObject *jsonData) {
  EduUmassCsNioJSONDelayEmulator_initialize();
  if (EduUmassCsNioJSONDelayEmulator_EMULATE_RECEIVER_DELAYS) {
    @try {
      [((OrgJsonJSONObject *) nil_chk(jsonData)) putWithNSString:EduUmassCsNioJSONDelayEmulator_DELAY_STR withLong:EduUmassCsNioJSONDelayEmulator_getDelayWithId_(id_)];
    }
    @catch (OrgJsonJSONException *e) {
      [((OrgJsonJSONException *) nil_chk(e)) printStackTrace];
    }
  }
}

jlong EduUmassCsNioJSONDelayEmulator_getEmulatedDelayWithOrgJsonJSONObject_(OrgJsonJSONObject *jsonData) {
  EduUmassCsNioJSONDelayEmulator_initialize();
  if (EduUmassCsNioJSONDelayEmulator_EMULATE_RECEIVER_DELAYS) {
    if ([((OrgJsonJSONObject *) nil_chk(jsonData)) hasWithNSString:EduUmassCsNioJSONDelayEmulator_DELAY_STR]) {
      @try {
        return [jsonData getLongWithNSString:EduUmassCsNioJSONDelayEmulator_DELAY_STR];
      }
      @catch (OrgJsonJSONException *e) {
        [((OrgJsonJSONException *) nil_chk(e)) printStackTrace];
      }
    }
  }
  return -1;
}

jlong EduUmassCsNioJSONDelayEmulator_getEmulatedDelayWithNSString_(NSString *strData) {
  EduUmassCsNioJSONDelayEmulator_initialize();
  OrgJsonJSONObject *json = nil;
  @try {
    json = create_OrgJsonJSONObject_initWithNSString_(strData);
  }
  @catch (OrgJsonJSONException *e) {
    return -1;
  }
  return EduUmassCsNioJSONDelayEmulator_getEmulatedDelayWithOrgJsonJSONObject_(json);
}

jlong EduUmassCsNioJSONDelayEmulator_getDelayWithId_(id id_) {
  EduUmassCsNioJSONDelayEmulator_initialize();
  jlong delay = 0;
  if (EduUmassCsNioJSONDelayEmulator_EMULATE_RECEIVER_DELAYS) {
    if (EduUmassCsNioJSONDelayEmulator_USE_CONFIG_FILE_INFO && id_ != nil) {
      if ([id_ isKindOfClass:[JavaLangInteger class]]) delay = [((id<EduUmassCsNioNioutilsInterfaceDelayEmulator>) nil_chk(((id<EduUmassCsNioNioutilsInterfaceDelayEmulator>) cast_check(EduUmassCsNioJSONDelayEmulator_pingNodeConfig, EduUmassCsNioNioutilsInterfaceDelayEmulator_class_())))) getEmulatedDelayWithId:(JavaLangInteger *) cast_chk(id_, [JavaLangInteger class])] / 2;
      else if ([id_ isKindOfClass:[NSString class]]) delay = [((id<EduUmassCsNioNioutilsInterfaceDelayEmulator>) nil_chk(((id<EduUmassCsNioNioutilsInterfaceDelayEmulator>) cast_check(EduUmassCsNioJSONDelayEmulator_pingNodeConfig, EduUmassCsNioNioutilsInterfaceDelayEmulator_class_())))) getEmulatedDelayWithId:(NSString *) cast_chk(id_, [NSString class])] / 2;
      else if ([id_ isKindOfClass:[JavaNetSocketAddress class]]) delay = [((id<EduUmassCsNioNioutilsInterfaceDelayEmulator>) nil_chk(((id<EduUmassCsNioNioutilsInterfaceDelayEmulator>) cast_check(EduUmassCsNioJSONDelayEmulator_pingNodeConfig, EduUmassCsNioNioutilsInterfaceDelayEmulator_class_())))) getEmulatedDelayWithId:(JavaNetSocketAddress *) cast_chk(id_, [JavaNetSocketAddress class])] / 2;
    }
    else {
      delay = EduUmassCsNioJSONDelayEmulator_DEFAULT_DELAY;
    }
    delay = JreFpToLong(((1.0 + EduUmassCsNioJSONDelayEmulator_VARIATION * JavaLangMath_random()) * delay));
  }
  return delay;
}

jlong EduUmassCsNioJSONDelayEmulator_getEmulatedDelay() {
  EduUmassCsNioJSONDelayEmulator_initialize();
  return JreFpToLong(((1.0 + EduUmassCsNioJSONDelayEmulator_VARIATION * JavaLangMath_random()) * EduUmassCsNioJSONDelayEmulator_DEFAULT_DELAY));
}

void EduUmassCsNioJSONDelayEmulator_setBaseDelayWithLong_(jlong d) {
  EduUmassCsNioJSONDelayEmulator_initialize();
  EduUmassCsNioJSONDelayEmulator_DEFAULT_DELAY = d;
}

void EduUmassCsNioJSONDelayEmulator_setVariationWithDouble_(jdouble v) {
  EduUmassCsNioJSONDelayEmulator_initialize();
  EduUmassCsNioJSONDelayEmulator_VARIATION = v;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(EduUmassCsNioJSONDelayEmulator)
