//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ../src/edu/umass/cs/gnscommon/SharedGuidUtils.java
//

#include "IOSClass.h"
#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "edu/umass/cs/gigapaxos/interfaces/Request.h"
#include "edu/umass/cs/gnscommon/GNSProtocol.h"
#include "edu/umass/cs/gnscommon/SharedGuidUtils.h"
#include "edu/umass/cs/gnscommon/packets/CommandPacket.h"
#include "edu/umass/cs/gnscommon/utils/Base64.h"
#include "edu/umass/cs/gnscommon/utils/ByteUtils.h"
#include "edu/umass/cs/gnsserver/gnsapp/clientCommandProcessor/commandSupport/ShaOneHashFunction.h"
#include "edu/umass/cs/gnsserver/gnsapp/packet/Packet.h"
#include "edu/umass/cs/nio/JSONPacket.h"
#include "edu/umass/cs/nio/MessageExtractor.h"
#include "edu/umass/cs/nio/interfaces/IntegerPacketType.h"
#include "edu/umass/cs/nio/interfaces/Stringifiable.h"
#include "edu/umass/cs/nio/nioutils/NIOHeader.h"
#include "edu/umass/cs/reconfiguration/reconfigurationutils/RequestParseException.h"
#include "edu/umass/cs/utils/DelayProfiler.h"
#include "edu/umass/cs/utils/Util.h"
#include "java/io/UnsupportedEncodingException.h"
#include "java/lang/Exception.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/RuntimeException.h"
#include "java/lang/System.h"
#include "java/net/InetSocketAddress.h"
#include "java/nio/ByteBuffer.h"
#include "java/util/HashSet.h"
#include "java/util/Set.h"
#include "org/json/JSONArray.h"
#include "org/json/JSONException.h"
#include "org/json/JSONObject.h"

@interface EduUmassCsGnscommonSharedGuidUtils ()

+ (id<EduUmassCsGigapaxosInterfacesRequest>)fromBytesWithByteArray:(IOSByteArray *)msgBytes;

@end

__attribute__((unused)) static id<EduUmassCsGigapaxosInterfacesRequest> EduUmassCsGnscommonSharedGuidUtils_fromBytesWithByteArray_(IOSByteArray *msgBytes);

@implementation EduUmassCsGnscommonSharedGuidUtils

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  EduUmassCsGnscommonSharedGuidUtils_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (NSString *)createGuidStringFromPublicKeyWithByteArray:(IOSByteArray *)keyBytes {
  return EduUmassCsGnscommonSharedGuidUtils_createGuidStringFromPublicKeyWithByteArray_(keyBytes);
}

+ (NSString *)createGuidStringFromBase64PublicKeyWithNSString:(NSString *)publicKey {
  return EduUmassCsGnscommonSharedGuidUtils_createGuidStringFromBase64PublicKeyWithNSString_(publicKey);
}

+ (OrgJsonJSONArray *)convertPublicKeysToGuidsWithOrgJsonJSONArray:(OrgJsonJSONArray *)publicKeys {
  return EduUmassCsGnscommonSharedGuidUtils_convertPublicKeysToGuidsWithOrgJsonJSONArray_(publicKeys);
}

+ (id<JavaUtilSet>)convertPublicKeysToGuidsWithJavaUtilSet:(id<JavaUtilSet>)publicKeys {
  return EduUmassCsGnscommonSharedGuidUtils_convertPublicKeysToGuidsWithJavaUtilSet_(publicKeys);
}

+ (NSString *)findPublicKeyForGuidWithNSString:(NSString *)guid
                               withJavaUtilSet:(id<JavaUtilSet>)publicKeys {
  return EduUmassCsGnscommonSharedGuidUtils_findPublicKeyForGuidWithNSString_withJavaUtilSet_(guid, publicKeys);
}

+ (jboolean)publicKeyListContainsGuidWithNSString:(NSString *)guid
                                  withJavaUtilSet:(id<JavaUtilSet>)publicKeys {
  return EduUmassCsGnscommonSharedGuidUtils_publicKeyListContainsGuidWithNSString_withJavaUtilSet_(guid, publicKeys);
}

+ (id<EduUmassCsGigapaxosInterfacesRequest>)getRequestStaticWithByteArray:(IOSByteArray *)msgBytes
                                       withEduUmassCsNioNioutilsNIOHeader:(EduUmassCsNioNioutilsNIOHeader *)header
                                 withEduUmassCsNioInterfacesStringifiable:(id<EduUmassCsNioInterfacesStringifiable>)unstringer {
  return EduUmassCsGnscommonSharedGuidUtils_getRequestStaticWithByteArray_withEduUmassCsNioNioutilsNIOHeader_withEduUmassCsNioInterfacesStringifiable_(msgBytes, header, unstringer);
}

+ (id<EduUmassCsGigapaxosInterfacesRequest>)fromBytesWithByteArray:(IOSByteArray *)msgBytes {
  return EduUmassCsGnscommonSharedGuidUtils_fromBytesWithByteArray_(msgBytes);
}

+ (const J2ObjcClassInfo *)__metadata {
  static J2ObjcMethodInfo methods[] = {
    { NULL, NULL, 0x1, -1, -1, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x9, 0, 1, -1, -1, -1, -1 },
    { NULL, "LNSString;", 0x9, 2, 3, 4, -1, -1, -1 },
    { NULL, "LOrgJsonJSONArray;", 0x9, 5, 6, 7, -1, -1, -1 },
    { NULL, "LJavaUtilSet;", 0x9, 5, 8, -1, 9, -1, -1 },
    { NULL, "LNSString;", 0x9, 10, 11, -1, 12, -1, -1 },
    { NULL, "Z", 0x9, 13, 11, -1, 14, -1, -1 },
    { NULL, "LEduUmassCsGigapaxosInterfacesRequest;", 0x9, 15, 16, 17, 18, -1, -1 },
    { NULL, "LEduUmassCsGigapaxosInterfacesRequest;", 0xa, 19, 1, 17, -1, -1, -1 },
  };
  #pragma clang diagnostic push
  #pragma clang diagnostic ignored "-Wobjc-multiple-method-names"
  methods[0].selector = @selector(init);
  methods[1].selector = @selector(createGuidStringFromPublicKeyWithByteArray:);
  methods[2].selector = @selector(createGuidStringFromBase64PublicKeyWithNSString:);
  methods[3].selector = @selector(convertPublicKeysToGuidsWithOrgJsonJSONArray:);
  methods[4].selector = @selector(convertPublicKeysToGuidsWithJavaUtilSet:);
  methods[5].selector = @selector(findPublicKeyForGuidWithNSString:withJavaUtilSet:);
  methods[6].selector = @selector(publicKeyListContainsGuidWithNSString:withJavaUtilSet:);
  methods[7].selector = @selector(getRequestStaticWithByteArray:withEduUmassCsNioNioutilsNIOHeader:withEduUmassCsNioInterfacesStringifiable:);
  methods[8].selector = @selector(fromBytesWithByteArray:);
  #pragma clang diagnostic pop
  static const void *ptrTable[] = { "createGuidStringFromPublicKey", "[B", "createGuidStringFromBase64PublicKey", "LNSString;", "LJavaLangIllegalArgumentException;", "convertPublicKeysToGuids", "LOrgJsonJSONArray;", "LOrgJsonJSONException;", "LJavaUtilSet;", "(Ljava/util/Set<Ljava/lang/String;>;)Ljava/util/Set<Ljava/lang/String;>;", "findPublicKeyForGuid", "LNSString;LJavaUtilSet;", "(Ljava/lang/String;Ljava/util/Set<Ljava/lang/String;>;)Ljava/lang/String;", "publicKeyListContainsGuid", "(Ljava/lang/String;Ljava/util/Set<Ljava/lang/String;>;)Z", "getRequestStatic", "[BLEduUmassCsNioNioutilsNIOHeader;LEduUmassCsNioInterfacesStringifiable;", "LEduUmassCsReconfigurationReconfigurationutilsRequestParseException;", "([BLedu/umass/cs/nio/nioutils/NIOHeader;Ledu/umass/cs/nio/interfaces/Stringifiable<Ljava/lang/String;>;)Ledu/umass/cs/gigapaxos/interfaces/Request;", "fromBytes" };
  static const J2ObjcClassInfo _EduUmassCsGnscommonSharedGuidUtils = { "SharedGuidUtils", "edu.umass.cs.gnscommon", ptrTable, methods, NULL, 7, 0x1, 9, 0, -1, -1, -1, -1, -1 };
  return &_EduUmassCsGnscommonSharedGuidUtils;
}

@end

void EduUmassCsGnscommonSharedGuidUtils_init(EduUmassCsGnscommonSharedGuidUtils *self) {
  NSObject_init(self);
}

EduUmassCsGnscommonSharedGuidUtils *new_EduUmassCsGnscommonSharedGuidUtils_init() {
  J2OBJC_NEW_IMPL(EduUmassCsGnscommonSharedGuidUtils, init)
}

EduUmassCsGnscommonSharedGuidUtils *create_EduUmassCsGnscommonSharedGuidUtils_init() {
  J2OBJC_CREATE_IMPL(EduUmassCsGnscommonSharedGuidUtils, init)
}

NSString *EduUmassCsGnscommonSharedGuidUtils_createGuidStringFromPublicKeyWithByteArray_(IOSByteArray *keyBytes) {
  EduUmassCsGnscommonSharedGuidUtils_initialize();
  IOSByteArray *publicKeyDigest = [((EduUmassCsGnsserverGnsappClientCommandProcessorCommandSupportShaOneHashFunction *) nil_chk(EduUmassCsGnsserverGnsappClientCommandProcessorCommandSupportShaOneHashFunction_getInstance())) hash__WithByteArray:keyBytes];
  return EduUmassCsGnscommonUtilsByteUtils_toHexWithByteArray_(publicKeyDigest);
}

NSString *EduUmassCsGnscommonSharedGuidUtils_createGuidStringFromBase64PublicKeyWithNSString_(NSString *publicKey) {
  EduUmassCsGnscommonSharedGuidUtils_initialize();
  IOSByteArray *publickeyBytes = EduUmassCsGnscommonUtilsBase64_decodeWithNSString_(publicKey);
  if (publickeyBytes == nil) {
    @throw create_JavaLangIllegalArgumentException_init();
  }
  return EduUmassCsGnscommonSharedGuidUtils_createGuidStringFromPublicKeyWithByteArray_(publickeyBytes);
}

OrgJsonJSONArray *EduUmassCsGnscommonSharedGuidUtils_convertPublicKeysToGuidsWithOrgJsonJSONArray_(OrgJsonJSONArray *publicKeys) {
  EduUmassCsGnscommonSharedGuidUtils_initialize();
  OrgJsonJSONArray *guids = create_OrgJsonJSONArray_init();
  for (jint i = 0; i < [((OrgJsonJSONArray *) nil_chk(publicKeys)) length]; i++) {
    @try {
      if ([((NSString *) nil_chk([publicKeys getStringWithInt:i])) isEqual:[((EduUmassCsGnscommonGNSProtocol *) nil_chk(JreLoadEnum(EduUmassCsGnscommonGNSProtocol, ALL_GUIDS))) description]]) {
        [guids putWithId:[JreLoadEnum(EduUmassCsGnscommonGNSProtocol, ALL_GUIDS) description]];
      }
      else {
        [guids putWithId:EduUmassCsGnscommonSharedGuidUtils_createGuidStringFromBase64PublicKeyWithNSString_([publicKeys getStringWithInt:i])];
      }
    }
    @catch (JavaLangIllegalArgumentException *e) {
    }
  }
  return guids;
}

id<JavaUtilSet> EduUmassCsGnscommonSharedGuidUtils_convertPublicKeysToGuidsWithJavaUtilSet_(id<JavaUtilSet> publicKeys) {
  EduUmassCsGnscommonSharedGuidUtils_initialize();
  id<JavaUtilSet> guids = create_JavaUtilHashSet_init();
  for (NSString * __strong publicKey in nil_chk(publicKeys)) {
    @try {
      [guids addWithId:EduUmassCsGnscommonSharedGuidUtils_createGuidStringFromBase64PublicKeyWithNSString_(publicKey)];
    }
    @catch (JavaLangIllegalArgumentException *e) {
    }
  }
  return guids;
}

NSString *EduUmassCsGnscommonSharedGuidUtils_findPublicKeyForGuidWithNSString_withJavaUtilSet_(NSString *guid, id<JavaUtilSet> publicKeys) {
  EduUmassCsGnscommonSharedGuidUtils_initialize();
  if (guid != nil) {
    for (NSString * __strong publicKey in nil_chk(publicKeys)) {
      @try {
        if ([guid isEqual:EduUmassCsGnscommonSharedGuidUtils_createGuidStringFromBase64PublicKeyWithNSString_(publicKey)]) {
          return publicKey;
        }
      }
      @catch (JavaLangIllegalArgumentException *e) {
      }
    }
  }
  return nil;
}

jboolean EduUmassCsGnscommonSharedGuidUtils_publicKeyListContainsGuidWithNSString_withJavaUtilSet_(NSString *guid, id<JavaUtilSet> publicKeys) {
  EduUmassCsGnscommonSharedGuidUtils_initialize();
  return EduUmassCsGnscommonSharedGuidUtils_findPublicKeyForGuidWithNSString_withJavaUtilSet_(guid, publicKeys) != nil;
}

id<EduUmassCsGigapaxosInterfacesRequest> EduUmassCsGnscommonSharedGuidUtils_getRequestStaticWithByteArray_withEduUmassCsNioNioutilsNIOHeader_withEduUmassCsNioInterfacesStringifiable_(IOSByteArray *msgBytes, EduUmassCsNioNioutilsNIOHeader *header, id<EduUmassCsNioInterfacesStringifiable> unstringer) {
  EduUmassCsGnscommonSharedGuidUtils_initialize();
  id<EduUmassCsGigapaxosInterfacesRequest> request = nil;
  @try {
    jlong t = JavaLangSystem_nanoTime();
    if (EduUmassCsNioJSONPacket_couldBeJSONWithByteArray_(msgBytes)) {
      OrgJsonJSONObject *json = create_OrgJsonJSONObject_initWithNSString_([NSString java_stringWithBytes:msgBytes charsetName:EduUmassCsNioNioutilsNIOHeader_CHARSET]);
      EduUmassCsNioMessageExtractor_stampAddressIntoJSONObjectWithJavaNetInetSocketAddress_withJavaNetInetSocketAddress_withOrgJsonJSONObject_(((EduUmassCsNioNioutilsNIOHeader *) nil_chk(header))->sndr_, header->rcvr_, json);
      request = (id<EduUmassCsGigapaxosInterfacesRequest>) cast_check(EduUmassCsGnsserverGnsappPacketPacket_createInstanceWithOrgJsonJSONObject_withEduUmassCsNioInterfacesStringifiable_(json, unstringer), EduUmassCsGigapaxosInterfacesRequest_class_());
    }
    else {
      return EduUmassCsGnscommonSharedGuidUtils_fromBytesWithByteArray_(msgBytes);
    }
    if (EduUmassCsUtilsUtil_oneInWithInt_(100)) {
      EduUmassCsUtilsDelayProfiler_updateDelayNanoWithNSString_withDouble_(JreStrcat("$@", @"getRequest.", [((id<EduUmassCsGigapaxosInterfacesRequest>) nil_chk(request)) getRequestType]), t);
    }
  }
  @catch (OrgJsonJSONException *e) {
    @throw create_EduUmassCsReconfigurationReconfigurationutilsRequestParseException_initWithJavaLangException_(e);
  }
  @catch (JavaIoUnsupportedEncodingException *e) {
    @throw create_EduUmassCsReconfigurationReconfigurationutilsRequestParseException_initWithJavaLangException_(e);
  }
  return request;
}

id<EduUmassCsGigapaxosInterfacesRequest> EduUmassCsGnscommonSharedGuidUtils_fromBytesWithByteArray_(IOSByteArray *msgBytes) {
  EduUmassCsGnscommonSharedGuidUtils_initialize();
  switch ([EduUmassCsGnsserverGnsappPacketPacket_PacketType_getPacketTypeWithInt_([((JavaNioByteBuffer *) nil_chk(JavaNioByteBuffer_wrapWithByteArray_(msgBytes))) getInt]) ordinal]) {
    case EduUmassCsGnsserverGnsappPacketPacket_PacketType_Enum_COMMAND:
    return create_EduUmassCsGnscommonPacketsCommandPacket_initWithByteArray_(msgBytes);
    default:
    @throw create_EduUmassCsReconfigurationReconfigurationutilsRequestParseException_initWithJavaLangException_(create_JavaLangRuntimeException_initWithNSString_(@"Unrecognizable request type"));
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(EduUmassCsGnscommonSharedGuidUtils)
